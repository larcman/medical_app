<h1> Detalles del protocolo </h1>

<div class="spacer-5"></div>

<h3> Pacientes </h3>

<div class="spacer-5"></div>

<div class="form-inline">
  <%= form_for(@patient) do |f| %>
    <b>Codigo <%= @research.code %></b>
    <%= f.text_field :code, class: 'form-control' %>

    <b>Candidato</b>
    <%= f.collection_select :person_id, @people, :id, :identifier, {:include_blank => true}, {:class => 'form-control'} %>
    
    <%= f.hidden_field :research_id, :value => @research.id %>
    <%= f.hidden_field :quick_creation, :value => true %>
    <%= f.submit "Agregar Paciente", class: "btn btn-primary" %>
  <% end %>
</div>

<div class="spacer-5"></div>

<div class="row header">
  <div class="col-md-2"> Codigo <%= @research.code %> </div>
  <div class="col-md-2"> Codigo IIRSME </div>  
  <div class="col-md-3"> Candidato </div>
  <div class="col-md-1"> Telefono </div>
  <div class="col-md-1"> Celular </div>  
  <div class="col-md-1"></div>
  <div class="col-md-1"></div>
</div>

<% if @patients.length > 0 %>

<% @patients.each_with_index do |patient, idx| %>
  <% person = patient.person %>
  <% if (idx % 2 == 0) %>
    <div class="row content-even">
	  <div class="col-md-2 row-center"><%= patient.code %></div>
	  <div class="col-md-2 row-center"><%= person.code %></div>
	  <div class="col-md-3"><%= person.firstname + ' ' + person.lastname %></div>
	  <div class="col-md-1 row-center"><%= person.phone %></div>	  
	  <div class="col-md-1 row-center"><%= person.cellphone %></div>	  
	  <div class="col-md-1 row-center"><%= link_to "Ver", edit_patient_path(patient.id), { method: "put" } %></div>
	  <div class="col-md-1 row-center"><%= link_to "Eliminar", patient, method: :delete, data: { confirm: "¿Estas seguro que quieres eliminar este paciente?" } %></div>
	</div>
  <% else %>
    <div class="row content-odd">
	  <div class="col-md-2 row-center"><%= patient.code %></div>
	  <div class="col-md-2 row-center"><%= person.code %></div>
	  <div class="col-md-3"><%= person.firstname + ' ' + person.lastname %></div>
	  <div class="col-md-1 row-center"><%= person.phone %></div>	  
	  <div class="col-md-1 row-center"><%= person.cellphone %></div>	  
	  <div class="col-md-1 row-center"><%= link_to "Ver", edit_patient_path(patient.id), { method: "put" } %></div>
	  <div class="col-md-1 row-center"><%= link_to "Eliminar", patient, method: :delete, data: { confirm: "¿Estas seguro que quieres eliminar este paciente?" } %></div>
	</div>
  <% end %>
<% end %>

<div class="row footer">
  <div class="col-md-2"></div>
  <div class="col-md-2"></div>  
  <div class="col-md-3"></div>
  <div class="col-md-1"></div>
  <div class="col-md-1"></div>
  <div class="col-md-1"></div>
  <div class="col-md-1"></div>
</div>

<% else %>

  <div class="col-lg-12 row-center"><h4>No hay pacientes registrados aún...</h4></div>
  
<% end %>
